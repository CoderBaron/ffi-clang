language: ruby
rvm:
  - "2.2.4"
  - "2.3.0"
env:
  - LLVM_VERSION=3.4
  - LLVM_VERSION=3.5
  - LLVM_VERSION=3.6
  - LLVM_VERSION=3.7
before_install:
  - gem update bundler
  - sudo add-apt-repository --yes ppa:h-rayflood/llvm
  - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
  - sudo add-apt-repository --yes 'deb http://llvm.org/apt/precise/ llvm-toolchain-precise main'
  - wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add -
  - sudo apt-get -qq update
  - sudo apt-get -qq install libclang-${LLVM_VERSION}-dev clang-${LLVM_VERSION}
  - export LD_LIBRARY_PATH=/usr/lib/llvm-${LLVM_VERSION}/lib/
  - export PATH=/usr/lib/llvm-${LLVM_VERSION}/bin:$PATH
matrix:
  allow_failures:
    - env: LLVM_VERSION=3.5
